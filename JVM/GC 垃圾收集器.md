# GC 垃圾收集器

[TOC]

## 1. 判断对象存活算法

### 1.1. 引用计数算法

说明：在对象添加一个引用计数器，每当有一个地方引用它时，计数器就 +1；当引用失效时，计数器就 -1；任何时刻计数器为 0 时的对象就是不可能再被使用的。

缺点：无法回收循环引用的对象。（循环引用：即 `objA.instance = objeB.instance; objB.instance = objeA.instance;`） 

### 1.2. 可达性分析算法

说明：通过一系列称为 " GC Roots " 的根对象作为起始节点集，从这些节点开始，根据引用关系向下搜索，搜索过程成为 " 引用链 " ，如果某个对象到 GC Roots 间没有任何引用链相连，或者用图轮的话来说就是从 GC Roots 到这个对象不可达时，则证明此对象是不可能再被使用的。

#### 1.2.1. 固定可作为 GC Root 的对象

- 在虚拟机栈 ( 栈帧中的本地变量表 ) 中引用的对象，如各个线程被调用的方法堆栈中使用到的参数、局部变量、临时变量等。

- 在方法区中类静态属性引用的对象，如 Java 类的引用类型静态变量。

- 在方法去中常量引用的对象，如字符串常量池 ( String Table ) 里的引用

- 在本地方法栈中 JNI ( 即Native 方法 ) 引用的对象。

- Java 虚拟机内部的引用，如基本数据类型对应的 Class对象，一些常驻的异常对象，以及系统类加载器。

- 所有被同步锁 ( synchronized 关键字 ) 持有的对象。

- 反应 Java 虚拟机内部情况的 JMXBean , JVMTI 中注册的回调、本地代码缓存。

## 2. 引用类型

### 2.1. 强引用

### 2.2. 软引用

### 2.3. 弱引用

### 2.4. 虚引用

## 3. 垃圾收集算法

### 3.1. 分代收集理论

- 弱分代假说

- 强分代假说

- 跨代引用假说

### 3.2. 垃圾收集算法分类

- 标记 - 复制算法

- 标记 - 清除算法

- 标记 - 整理算法

#### 3.2.1. GC 分类

- 部分收集（ Partial GC ）

- 新生代收集（ Minor GC / Young GC ）

- 老年代收集（ Major GC / Old GC ）

- 混合收集（ Mixed GC ）

- 整堆收集（ Full GC ）
